

<!--
Documentation generated by Skydoc
-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Run Angular's AOT template compiler</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.1/material.green-light_blue.min.css">
    <script defer src="https://code.getmdl.io/1.1.1/material.min.js"></script>
    <link rel="stylesheet" href="/bazel-builds/main.css">
  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
      mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title">Run Angular's AOT template compiler</span>
        </div>
      </header>
      <div class="mdl-layout__drawer">
        <span class="mdl-layout-title">Bazel</span>
        <nav class="drawer-nav">
          <ul class="drawer-nav">
            
<li><a href="/bazel-builds/index.html">Overview</a></li>
<li>
  <a href="/bazel-builds/src/ng_module.html">Run Angular's AOT template compiler</a>
  <ul>
    <li>
      <a href="/bazel-builds/src/ng_module.html#ng_module">
        ng_module
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="/bazel-builds/src/ng_rollup_bundle.html">Rollup with Build Optimizer</a>
  <ul>
    <li><a href="/bazel-builds/src/ng_rollup_bundle.html#overview">Overview</a></li>
    <li>
      <a href="/bazel-builds/src/ng_rollup_bundle.html#ng_rollup_bundle">
        ng_rollup_bundle
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="/bazel-builds/src/ng_setup_workspace.html">Install toolchain dependencies</a>
  <ul>
  </ul>
</li>
<li>
  <a href="/bazel-builds/src/ng_package/ng_package.html">Package Angular libraries for npm distribution</a>
  <ul>
    <li><a href="/bazel-builds/src/ng_package/ng_package.html#overview">Overview</a></li>
    <li>
      <a href="/bazel-builds/src/ng_package/ng_package.html#ng_package">
        ng_package
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="/bazel-builds/src/protractor/protractor_web_test.html">Run end-to-end tests with Protractor</a>
  <ul>
  </ul>
</li>

          </ul>
        </nav>
      </div>

      <main class="mdl-layout__content">
        <div class="page-content">
          <h1>Run Angular's AOT template compiler</h1>

<nav class="toc">
  <h2>Rules</h2>
  <ul>
    <li><a href="#ng_module">ng_module</a></li>
  </ul>
  <h2>Macros</h2>
  <ul>
    <li><a href="#compile_strategy">compile_strategy</a></li>
    <li><a href="#ngc_compile_action">ngc_compile_action</a></li>
    <li><a href="#ng_module_impl">ng_module_impl</a></li>
  </ul>
</nav>
          <hr>

          <h2 id="compile_strategy">compile_strategy</h2>

          <pre>compile_strategy(<a href="#compile_strategy.ctx">ctx</a>)</pre>

          <p>Detect which strategy should be used to implement ng_module.</p>
<p>Depending on the value of the 'compile' define flag, ng_module
can be implemented in various ways. This function reads the configuration passed by the user and
determines which mode is active.</p>
<p>Returns:
  one of 'legacy' or 'aot' depending on the configuration in ctx</p>


          <h3 id="compile_strategy_args">Attributes</h3>

<table class="params-table">
  <colgroup>
    <col class="col-param" />
    <col class="col-description" />
  </colgroup>
  <tbody>
    <tr id="compile_strategy.ctx">
      <td><code>ctx</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>skylark rule execution context</p>
      </td>
    </tr>
  </tbody>
</table>
          <hr>

          <h2 id="ngc_compile_action">ngc_compile_action</h2>

          <pre>ngc_compile_action(<a href="#ngc_compile_action.ctx">ctx</a>, <a href="#ngc_compile_action.label">label</a>, <a href="#ngc_compile_action.inputs">inputs</a>, <a href="#ngc_compile_action.outputs">outputs</a>, <a href="#ngc_compile_action.messages_out">messages_out</a>, <a href="#ngc_compile_action.tsconfig_file">tsconfig_file</a>, <a href="#ngc_compile_action.node_opts">node_opts</a>, <a href="#ngc_compile_action.locale">locale</a>, <a href="#ngc_compile_action.i18n_args">i18n_args</a>)</pre>

          <p>Helper function to create the ngc action.</p>
<p>This is exposed for google3 to wire up i18n replay rules, and is not intended
as part of the public API.</p>
<p>Returns:
  the parameters of the compilation which will be used to replay the ngc action for i18N.</p>


          <h3 id="ngc_compile_action_args">Attributes</h3>

<table class="params-table">
  <colgroup>
    <col class="col-param" />
    <col class="col-description" />
  </colgroup>
  <tbody>
    <tr id="ngc_compile_action.ctx">
      <td><code>ctx</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>skylark context</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.label">
      <td><code>label</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>the label of the ng_module being compiled</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.inputs">
      <td><code>inputs</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>passed to the ngc action's inputs</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.outputs">
      <td><code>outputs</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>passed to the ngc action's outputs</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.messages_out">
      <td><code>messages_out</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>produced xmb files</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.tsconfig_file">
      <td><code>tsconfig_file</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>tsconfig file with settings used for the compilation</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.node_opts">
      <td><code>node_opts</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>list of strings, extra nodejs options.</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.locale">
      <td><code>locale</code></td>
      <td>
        <p><code>Unknown; Optional</code></p>
        <p>i18n locale, or None</p>
      </td>
    </tr>
    <tr id="ngc_compile_action.i18n_args">
      <td><code>i18n_args</code></td>
      <td>
        <p><code>List of strings; Optional</code></p>
        <p>additional command-line arguments to ngc</p>
      </td>
    </tr>
  </tbody>
</table>
          <hr>

          <h2 id="ng_module_impl">ng_module_impl</h2>

          <pre>ng_module_impl(<a href="#ng_module_impl.ctx">ctx</a>, <a href="#ng_module_impl.ts_compile_actions">ts_compile_actions</a>)</pre>

          <p>Implementation function for the ng_module rule.</p>
<p>This is exposed so that google3 can have its own entry point that re-uses this
and is not meant as a public API.</p>
<p>Returns:
  the result of the ng_module rule as a dict, suitable for
  conversion by ts_providers_dict_to_struct</p>


          <h3 id="ng_module_impl_args">Attributes</h3>

<table class="params-table">
  <colgroup>
    <col class="col-param" />
    <col class="col-description" />
  </colgroup>
  <tbody>
    <tr id="ng_module_impl.ctx">
      <td><code>ctx</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>the skylark rule context</p>
      </td>
    </tr>
    <tr id="ng_module_impl.ts_compile_actions">
      <td><code>ts_compile_actions</code></td>
      <td>
        <p><code>Unknown; Required</code></p>
        <p>generates all the actions to run an ngc compilation</p>
      </td>
    </tr>
  </tbody>
</table>
          <hr>

          <h2 id="ng_module">ng_module</h2>

          <pre>ng_module(<a href="#ng_module.name">name</a>, <a href="#ng_module.deps">deps</a>, <a href="#ng_module.srcs">srcs</a>, <a href="#ng_module.assets">assets</a>, <a href="#ng_module.compiler">compiler</a>, <a href="#ng_module.entry_point">entry_point</a>, <a href="#ng_module.factories">factories</a>, <a href="#ng_module.filter_summaries">filter_summaries</a>, <a href="#ng_module.flat_module_out_file">flat_module_out_file</a>, <a href="#ng_module.inline_resources">inline_resources</a>, <a href="#ng_module.ng_xi18n">ng_xi18n</a>, <a href="#ng_module.no_i18n">no_i18n</a>, <a href="#ng_module.node_modules">node_modules</a>, <a href="#ng_module.tsconfig">tsconfig</a>, <a href="#ng_module.type_check">type_check</a>)</pre>

          <p>Run the Angular AOT template compiler.</p>
<p>This rule extends the <a href="http://tsetse.info/api/build_defs.html#ts_library">ts_library</a> rule.</p>


          <h3 id="ng_module_args">Attributes</h3>

<table class="params-table">
  <colgroup>
    <col class="col-param" />
    <col class="col-description" />
  </colgroup>
  <tbody>
    <tr id="ng_module.name">
      <td><code>name</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#name">Name</a>; Required</code></p>
        <p>A unique name for this rule.</p>
      </td>
    </tr>
    <tr id="ng_module.deps">
      <td><code>deps</code></td>
      <td>
        <p><code>List of <a href="https://bazel.build/docs/build-ref.html#labels">labels</a>; Optional; Default is []</code></p>
        <p>Targets that are imported by this target</p>
      </td>
    </tr>
    <tr id="ng_module.srcs">
      <td><code>srcs</code></td>
      <td>
        <p><code>List of <a href="https://bazel.build/docs/build-ref.html#labels">labels</a>; Optional; Default is []</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.assets">
      <td><code>assets</code></td>
      <td>
        <p><code>List of <a href="https://bazel.build/docs/build-ref.html#labels">labels</a>; Optional; Default is []</code></p>
        <p>.html and .css files needed by the Angular compiler</p>
      </td>
    </tr>
    <tr id="ng_module.compiler">
      <td><code>compiler</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional; Default is </code></p>
        <p>Sets a different ngc compiler binary to use for this library.</p>
<pre><code>    The default ngc compiler depends on the `@npm//@angular/bazel`
    target which is setup for projects that use bazel managed npm deps that
    fetch the @angular/bazel npm package. It is recommended that you use
    the workspace name `@npm` for bazel managed deps so the default
    compiler works out of the box. Otherwise, you'll have to override
    the compiler attribute manually.
</code></pre>
      </td>
    </tr>
    <tr id="ng_module.entry_point">
      <td><code>entry_point</code></td>
      <td>
        <p><code>String; Optional; Default is ''</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.factories">
      <td><code>factories</code></td>
      <td>
        <p><code>List of <a href="https://bazel.build/docs/build-ref.html#labels">labels</a>; Optional; Default is []</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.filter_summaries">
      <td><code>filter_summaries</code></td>
      <td>
        <p><code>Boolean; Optional; Default is False</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.flat_module_out_file">
      <td><code>flat_module_out_file</code></td>
      <td>
        <p><code>String; Optional; Default is ''</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.inline_resources">
      <td><code>inline_resources</code></td>
      <td>
        <p><code>Boolean; Optional; Default is True</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.ng_xi18n">
      <td><code>ng_xi18n</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional; Default is </code></p>
        
      </td>
    </tr>
    <tr id="ng_module.no_i18n">
      <td><code>no_i18n</code></td>
      <td>
        <p><code>Boolean; Optional; Default is False</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.node_modules">
      <td><code>node_modules</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional; Default is @npm//typescript:typescript__typings</code></p>
        <p>The npm packages which should be available during the compile.</p>
<pre><code>    The default value of `@npm//typescript:typescript__typings` is
    for projects that use bazel managed npm deps. It is recommended
    that you use the workspace name `@npm` for bazel managed deps so the
    default value works out of the box. Otherwise, you'll have to
    override the node_modules attribute manually. This default is in place
    since code compiled by ng_module will always depend on at least the
    typescript default libs which are provided by
    `@npm//typescript:typescript__typings`.

    This attribute is DEPRECATED. As of version 0.18.0 the recommended
    approach to npm dependencies is to use fine grained npm dependencies
    which are setup with the `yarn_install` or `npm_install` rules.

    For example, in targets that used a `//:node_modules` filegroup,

    ```
    ng_module(
      name = "my_lib",
      ...
      node_modules = "//:node_modules",
    )
    ```

    which specifies all files within the `//:node_modules` filegroup
    to be inputs to the `my_lib`. Using fine grained npm dependencies,
    `my_lib` is defined with only the npm dependencies that are
    needed:

    ```
    ng_module(
      name = "my_lib",
      ...
      deps = [
          "@npm//@types/foo",
          "@npm//@types/bar",
          "@npm//foo",
          "@npm//bar",
          ...
      ],
    )
    ```

    In this case, only the listed npm packages and their
    transitive deps are includes as inputs to the `my_lib` target
    which reduces the time required to setup the runfiles for this
    target (see https://github.com/bazelbuild/bazel/issues/5153).
    The default typescript libs are also available via the node_modules
    default in this case.

    The @npm external repository and the fine grained npm package
    targets are setup using the `yarn_install` or `npm_install` rule
    in your WORKSPACE file:

    yarn_install(
      name = "npm",
      package_json = "//:package.json",
      yarn_lock = "//:yarn.lock",
    )
</code></pre>
      </td>
    </tr>
    <tr id="ng_module.tsconfig">
      <td><code>tsconfig</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional</code></p>
        
      </td>
    </tr>
    <tr id="ng_module.type_check">
      <td><code>type_check</code></td>
      <td>
        <p><code>Boolean; Optional; Default is True</code></p>
        
      </td>
    </tr>
  </tbody>
</table>


        </div>

        <footer class="mdl-mini-footer">
          <div class="mdl-mini-footer__left-section">
            <div class="mdl-logo">Bazel</div>
            <ul class="mdl-mini-footer__link-list">
              <li><a href="https://bazel.build">Home</a></li>
              <li><a href="https://github.com/bazelbuild">GitHub</a></li>
            </ul>
          </div>
        </footer>
      </main>
    </div>
  </body>
</html>
